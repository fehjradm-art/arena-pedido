<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARENA PEDIDOS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding-top: 70px;
        }
        
        /* Navega√ß√£o fixa */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(20, 20, 35, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 107, 0, 0.3);
            z-index: 1000;
            padding: 0 20px;
        }
        
        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }
        
        .brand {
            font-size: 24px;
            font-weight: 800;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .brand i {
            color: #ff6b00;
            font-size: 28px;
        }
        
        .brand span {
            background: linear-gradient(90deg, #ff6b00, #ff006e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .nav-links {
            display: flex;
            gap: 10px;
        }
        
        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: transparent;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-btn.admin {
            background: linear-gradient(90deg, #ff6b00, #ff4500);
            font-weight: 600;
        }
        
        .nav-btn.admin:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 107, 0, 0.4);
        }
        
        /* Container principal */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* P√°ginas */
        .page {
            display: none;
            animation: fadeIn 0.3s;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Hero */
        .hero {
            text-align: center;
            padding: 40px 20px;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            line-height: 1.2;
        }
        
        .hero h1 span {
            background: linear-gradient(90deg, #ff6b00, #ff006e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero p {
            color: #aaa;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 30px;
        }
        
        /* Formul√°rio */
        .form-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            .hero h1 {
                font-size: 2rem;
            }
            .nav-links {
                gap: 5px;
            }
            .nav-btn {
                padding: 8px 12px;
                font-size: 12px;
            }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #aaa;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 14px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #ff6b00;
            box-shadow: 0 0 0 3px rgba(255, 107, 0, 0.2);
        }
        
        /* Upload */
        .upload-box {
            border: 2px dashed rgba(255, 107, 0, 0.5);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(255, 107, 0, 0.05);
        }
        
        .upload-box:hover {
            border-color: #ff6b00;
            background: rgba(255, 107, 0, 0.1);
            transform: scale(1.02);
        }
        
        .upload-box i {
            font-size: 48px;
            color: #ff6b00;
            margin-bottom: 15px;
        }
        
        .upload-box p {
            color: #ccc;
            margin-bottom: 5px;
        }
        
        .upload-box small {
            color: #666;
        }
        
        .preview-box {
            position: relative;
            margin-top: 15px;
            display: none;
        }
        
        .preview-box img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 15px;
            border: 3px solid #ff6b00;
        }
        
        .preview-box .remove-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            background: #ff4444;
            border: none;
            border-radius: 50%;
            color: #fff;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(90deg, #ff6b00, #ff4500);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 107, 0, 0.4);
        }
        
        /* Estat√≠sticas */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s;
        }
        
        .stat-item:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 107, 0, 0.3);
        }
        
        .stat-item i {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .stat-item .number {
            font-size: 2.5rem;
            font-weight: 800;
            color: #ff6b00;
        }
        
        .stat-item .label {
            color: #aaa;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        /* Cards de filmes */
        .section-title {
            font-size: 1.8rem;
            margin: 40px 0 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: #ff6b00;
        }
        
        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .movie-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .movie-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: rgba(255, 107, 0, 0.3);
        }
        
        .movie-poster {
            position: relative;
            height: 400px;
            overflow: hidden;
        }
        
        .movie-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        
        .movie-card:hover .movie-poster img {
            transform: scale(1.1);
        }
        
        .movie-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.95), transparent);
            padding: 30px 20px 20px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .movie-card:hover .movie-overlay {
            opacity: 1;
        }
        
        .movie-overlay h3 {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }
        
        .movie-overlay p {
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .movie-info {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .movie-info span {
            color: #888;
            font-size: 0.85rem;
        }
        
        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .badge.pending { background: #f59e0b; color: #000; }
        .badge.watching { background: #3b82f6; color: #fff; }
        .badge.completed { background: #10b981; color: #fff; }
        .badge.rejected { background: #ef4444; color: #fff; }
        
        /* Tabela de pedidos */
        .table-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            text-align: left;
            padding: 15px;
            color: #aaa;
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        /* Admin */
        .login-card {
            max-width: 400px;
            margin: 80px auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            border: 1px solid rgba(255, 107, 0, 0.3);
        }
        
        .login-card i {
            font-size: 4rem;
            color: #ff6b00;
            margin-bottom: 20px;
        }
        
        .login-card h2 {
            margin-bottom: 10px;
        }
        
        .login-card p {
            color: #888;
            margin-bottom: 25px;
        }
        
        .login-card input {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            font-size: 16px;
        }
        
        .login-card button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(90deg, #ff6b00, #ff4500);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .error-text {
            color: #ff4444;
            margin-top: 10px;
            display: none;
        }
        
        /* Dashboard Admin */
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .admin-header h1 {
            font-size: 2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .admin-stat {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border-left: 4px solid;
        }
        
        .admin-stat.total { border-color: #ff6b00; }
        .admin-stat.pending { border-color: #f59e0b; }
        .admin-stat.watching { border-color: #3b82f6; }
        .admin-stat.completed { border-color: #10b981; }
        
        .admin-stat i {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }
        
        .admin-stat .num {
            font-size: 1.8rem;
            font-weight: 800;
        }
        
        .admin-stat .lbl {
            font-size: 0.75rem;
            color: #888;
            text-transform: uppercase;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            border-radius: 25px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .tab.active {
            background: linear-gradient(90deg, #ff6b00, #ff006e);
        }
        
        .admin-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            gap: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        @media (max-width: 600px) {
            .admin-item {
                flex-direction: column;
            }
        }
        
        .admin-item img {
            width: 100px;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            flex-shrink: 0;
        }
        
        .admin-content {
            flex: 1;
        }
        
        .admin-content h3 {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }
        
        .admin-meta {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .admin-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .btn-status {
            padding: 8px 15px;
            border-radius: 8px;
            border: 1px solid;
            background: transparent;
            color: #fff;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        
        .btn-status.pending { border-color: #f59e0b; color: #f59e0b; }
        .btn-status.pending:hover, .btn-status.pending.active { background: #f59e0b; color: #000; }
        
        .btn-status.watching { border-color: #3b82f6; color: #3b82f6; }
        .btn-status.watching:hover, .btn-status.watching.active { background: #3b82f6; color: #fff; }
        
        .btn-status.completed { border-color: #10b981; color: #10b981; }
        .btn-status.completed:hover, .btn-status.completed.active { background: #10b981; color: #fff; }
        
        .btn-status.rejected { border-color: #ef4444; color: #ef4444; }
        .btn-status.rejected:hover, .btn-status.rejected.active { background: #ef4444; color: #fff; }
        
        .btn-delete {
            padding: 8px 15px;
            background: rgba(255, 68, 68, 0.2);
            border: 1px solid #ff4444;
            color: #ff4444;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            margin-left: auto;
            transition: all 0.3s;
        }
        
        .btn-delete:hover {
            background: #ff4444;
            color: #fff;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #10b981;
            color: #fff;
            padding: 16px 24px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 9999;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .toast i {
            font-size: 1.3rem;
        }
    </style>
</head>
<body>

    <!-- Toast -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-text">Mensagem</span>
    </div>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-content">
            <div class="brand" onclick="goTo('home')">
                <i class="fas fa-film"></i>
                ARENA<span>PEDIDOS</span>
            </div>
            <div class="nav-links">
                <button class="nav-btn" onclick="goTo('home')">
                    <i class="fas fa-home"></i> In√≠cio
                </button>
                <button class="nav-btn" onclick="goTo('requests')">
                    <i class="fas fa-list"></i> Pedidos
                </button>
                <button class="nav-btn admin" onclick="goTo('admin')">
                    <i class="fas fa-lock"></i> Admin
                </button>
            </div>
        </div>
    </nav>

    <!-- P√ÅGINA: HOME -->
    <div id="page-home" class="page active">
        <div class="container">
            <div class="hero">
                <h1>Qual filme voc√™ quer<br><span>assistir hoje?</span></h1>
                <p>Preencha os dados do filme e adicione uma capa. Nossa equipe atualiza o cat√°logo baseado nas suas solicita√ß√µes.</p>
            </div>

            <div class="form-card">
                <form id="form-pedido" onsubmit="return enviarPedido(event)">
                    <div class="form-row">
                        <div>
                            <div class="form-group">
                                <label>Nome do Filme *</label>
                                <input type="text" id="inp-nome" required placeholder="Ex: Inception">
                            </div>
                            <div class="form-group">
                                <label>Ano</label>
                                <input type="number" id="inp-ano" placeholder="2010">
                            </div>
                            <div class="form-group">
                                <label>G√™nero *</label>
                                <select id="inp-genero" required>
                                    <option value="">Selecione um g√™nero</option>
                                    <option>A√ß√£o</option>
                                    <option>Aventura</option>
                                    <option>Com√©dia</option>
                                    <option>Drama</option>
                                    <option>Fic√ß√£o Cient√≠fica</option>
                                    <option>Terror</option>
                                    <option>Romance</option>
                                    <option>Anima√ß√£o</option>
                                    <option>Document√°rio</option>
                                    <option>Suspense</option>
                                    <option>Fantasia</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label>Capa do Filme *</label>
                                <input type="file" id="inp-arquivo" accept="image/*" style="display: none;" onchange="carregarImagem(this)">
                                <input type="url" id="inp-url" placeholder="Ou cole o link da imagem" style="margin-bottom: 10px;">
                                <div class="upload-box" onclick="document.getElementById('inp-arquivo').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Clique para selecionar imagem</p>
                                    <small>JPG, PNG ou GIF (m√°x 5MB)</small>
                                </div>
                                <div class="preview-box" id="box-preview">
                                    <img id="img-preview" src="">
                                    <button type="button" class="remove-btn" onclick="removerImagem()">√ó</button>
                                </div>
                                <input type="hidden" id="inp-poster" required>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-paper-plane"></i> Enviar Pedido
                    </button>
                </form>
            </div>

            <div class="stats-grid">
                <div class="stat-item">
                    <i class="fas fa-film" style="color: #ff6b00;"></i>
                    <div class="number" id="stat-total">0</div>
                    <div class="label">Filmes Pedidos</div>
                </div>
                <div class="stat-item">
                    <i class="fas fa-check-circle" style="color: #10b981;"></i>
                    <div class="number" id="stat-prontos">0</div>
                    <div class="label">Dispon√≠veis</div>
                </div>
                <div class="stat-item">
                    <i class="fas fa-clock" style="color: #3b82f6;"></i>
                    <div class="number" id="stat-espera">0</div>
                    <div class="label">Em An√°lise</div>
                </div>
            </div>

            <h2 class="section-title">
                <i class="fas fa-fire"></i> Pedidos Recentes
            </h2>
            <div class="movies-grid" id="lista-recentes">
                <div class="empty-state" style="grid-column: 1/-1;">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Carregando...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- P√ÅGINA: MEUS PEDIDOS -->
    <div id="page-requests" class="page">
        <div class="container">
            <h1 style="text-align: center; margin-bottom: 30px; font-size: 2.5rem;">Meus Pedidos</h1>
            <div class="table-card">
                <table>
                    <thead>
                        <tr>
                            <th>Capa</th>
                            <th>Filme</th>
                            <th>G√™nero</th>
                            <th>Status</th>
                            <th>Data</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-pedidos"></tbody>
                </table>
                <div class="empty-state" id="vazio-pedidos" style="display: none;">
                    <i class="fas fa-inbox"></i>
                    <p>Voc√™ ainda n√£o fez nenhum pedido</p>
                    <button onclick="goTo('home')" class="nav-btn admin" style="margin-top: 20px;">
                        Fazer primeiro pedido
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- P√ÅGINA: ADMIN -->
    <div id="page-admin" class="page">
        <div class="container">
            <!-- Login -->
            <div id="admin-login" class="login-card">
                <i class="fas fa-shield-alt"></i>
                <h2>Acesso Administrativo</h2>
                <p>Digite a senha para acessar o painel de controle</p>
                <input type="password" id="inp-senha" placeholder="Senha">
                <button onclick="fazerLogin()">Entrar</button>
                <p class="error-text" id="login-erro">Senha incorreta!</p>
            </div>

            <!-- Dashboard -->
            <div id="admin-dash" style="display: none;">
                <div class="admin-header">
                    <h1><i class="fas fa-chart-line" style="color: #ff6b00;"></i> Painel de Controle</h1>
                    <button onclick="fazerLogout()" class="nav-btn" style="border: 1px solid rgba(255,255,255,0.2);">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>

                <div class="admin-stats">
                    <div class="admin-stat total">
                        <i class="fas fa-film" style="color: #ff6b00;"></i>
                        <div class="num" id="adm-total">0</div>
                        <div class="lbl">Total</div>
                    </div>
                    <div class="admin-stat pending">
                        <i class="fas fa-clock" style="color: #f59e0b;"></i>
                        <div class="num" id="adm-pendentes">0</div>
                        <div class="lbl">Pendentes</div>
                    </div>
                    <div class="admin-stat watching">
                        <i class="fas fa-play" style="color: #3b82f6;"></i>
                        <div class="num" id="adm-andamento">0</div>
                        <div class="lbl">Em Progresso</div>
                    </div>
                    <div class="admin-stat completed">
                        <i class="fas fa-check" style="color: #10b981;"></i>
                        <div class="num" id="adm-prontos">0</div>
                        <div class="lbl">Completados</div>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab active" onclick="mudarAba('all', this)">Todos os Pedidos</button>
                    <button class="tab" onclick="mudarAba('pending', this)">Pendentes</button>
                    <button class="tab" onclick="mudarAba('watching', this)">Em Progresso</button>
                    <button class="tab" onclick="mudarAba('completed', this)">Completados</button>
                    <button class="tab" onclick="mudarAba('rejected', this)">Rejeitados</button>
                </div>

                <div id="admin-lista"></div>
                <div class="empty-state" id="admin-vazio" style="display: none;">
                    <i class="fas fa-inbox"></i>
                    <p>Nenhum pedido nesta categoria</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============== DADOS ==============
        let pedidos = [];
        let adminLogado = false;
        let abaAtual = 'all';
        const CHAVE_STORAGE = 'arena_pedidos_dados_v1';

        // ============== INICIALIZA√á√ÉO ==============
        window.onload = function() {
            console.log('üé¨ ARENA PEDIDOS - Iniciando...');
            carregarDados();
            atualizarTudo();
            
            // Verificar se j√° est√° logado
            if (sessionStorage.getItem('admin_logado') === 'sim') {
                adminLogado = true;
            }
        };

        // ============== STORAGE ==============
        function carregarDados() {
            try {
                let salvos = localStorage.getItem(CHAVE_STORAGE);
                if (salvos) {
                    pedidos = JSON.parse(salvos);
                    console.log('‚úÖ Dados carregados:', pedidos.length, 'pedidos');
                } else {
                    // Criar dados iniciais de demonstra√ß√£o
                    pedidos = [
                        {
                            id: 17082024001,
                            nome: "O Poderoso Chef√£o",
                            ano: "1972",
                            genero: "Drama",
                            status: "completed",
                            poster: "https://m.media-amazon.com/images/M/MV5BM2MyNjYxNmUtYTAwNi00MTYxLWJmNWYtYzZlODY3ZTk3OTFlXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_.jpg",
                            data: "17/02/2024"
                        },
                        {
                            id: 17082024002,
                            nome: "Interestelar",
                            ano: "2014",
                            genero: "Fic√ß√£o Cient√≠fica",
                            status: "watching",
                            poster: "https://m.media-amazon.com/images/M/MV5BZjdkOTU3MDktN2IxOS00OGEyLWFmMjktY2FiMmZkNWIyODZiXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_.jpg",
                            data: "17/02/2024"
                        },
                        {
                            id: 17082024003,
                            nome: "Parasita",
                            ano: "2019",
                            genero: "Suspense",
                            status: "pending",
                            poster: "https://m.media-amazon.com/images/M/MV5BYWZjMjk3ZTItODQ2ZC00NTY5LWE0ZDYtZTI3Mjc2N5Q5NjBmXkEyXkFqcGdeQXVyODk4OTc3MTY@._V1_.jpg",
                            data: "16/02/2024"
                        }
                    ];
                    salvarDados();
                }
            } catch (erro) {
                console.error('‚ùå Erro ao carregar:', erro);
                pedidos = [];
            }
        }

        function salvarDados() {
            try {
                localStorage.setItem(CHAVE_STORAGE, JSON.stringify(pedidos));
            } catch (erro) {
                console.error('‚ùå Erro ao salvar:', erro);
            }
        }

        // ============== NAVEGA√á√ÉO ==============
        function goTo(pagina) {
            console.log('‚û°Ô∏è Navegando para:', pagina);
            
            // Esconder todas as p√°ginas
            document.querySelectorAll('.page').forEach(p => {
                p.classList.remove('active');
            });
            
            // Mostrar p√°gina selecionada
            document.getElementById('page-' + pagina).classList.add('active');
            
            // Atualizar conte√∫do espec√≠fico
            if (pagina === 'requests') {
                renderizarTabela();
            } else if (pagina === 'admin') {
                if (adminLogado) {
                    mostrarDashboard();
                } else {
                    mostrarLogin();
                }
            }
            
            // Scroll para topo
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ============== FORMUL√ÅRIO ==============
        function carregarImagem(input) {
            let arquivo = input.files[0];
            if (!arquivo) return;
            
            if (arquivo.size > 5 * 1024 * 1024) {
                mostrarToast('‚ùå Arquivo muito grande! M√°ximo 5MB');
                return;
            }
            
            let leitor = new FileReader();
            leitor.onload = function(e) {
                document.getElementById('inp-poster').value = e.target.result;
                document.getElementById('img-preview').src = e.target.result;
                document.getElementById('box-preview').style.display = 'block';
                document.querySelector('.upload-box').style.display = 'none';
                mostrarToast('‚úÖ Imagem carregada!');
            };
            leitor.readAsDataURL(arquivo);
        }

        // URL da imagem
        document.getElementById('inp-url').addEventListener('change', function() {
            let url = this.value.trim();
            if (url && url.startsWith('http')) {
                document.getElementById('inp-poster').value = url;
                document.getElementById('img-preview').src = url;
                document.getElementById('box-preview').style.display = 'block';
                document.querySelector('.upload-box').style.display = 'none';
            }
        });

        function removerImagem() {
            document.getElementById('inp-poster').value = '';
            document.getElementById('box-preview').style.display = 'none';
            document.querySelector('.upload-box').style.display = 'block';
            document.getElementById('inp-arquivo').value = '';
            document.getElementById('inp-url').value = '';
        }

        function enviarPedido(evento) {
            evento.preventDefault();
            
            let poster = document.getElementById('inp-poster').value;
            if (!poster) {
                mostrarToast('‚ùå Adicione uma capa para o filme!');
                return false;
            }
            
            let pedido = {
                id: Date.now(),
                nome: document.getElementById('inp-nome').value,
                ano: document.getElementById('inp-ano').value,
                genero: document.getElementById('inp-genero').value,
                poster: poster,
                status: 'pending',
                data: new Date().toLocaleDateString('pt-BR')
            };
            
            pedidos.unshift(pedido);
            salvarDados();
            
            // Limpar formul√°rio
            document.getElementById('form-pedido').reset();
            removerImagem();
            
            mostrarToast('‚úÖ Pedido enviado com sucesso!');
            atualizarTudo();
            
            return false;
        }

        // ============== RENDERIZA√á√ÉO ==============
        function atualizarTudo() {
            // Estat√≠sticas
            document.getElementById('stat-total').textContent = pedidos.length;
            document.getElementById('stat-prontos').textContent = pedidos.filter(p => p.status === 'completed').length;
            document.getElementById('stat-espera').textContent = pedidos.filter(p => p.status === 'pending').length;
            
            // Recentes
            let recentes = pedidos.slice(0, 6);
            let html = '';
            
            if (recentes.length === 0) {
                html = `
                    <div class="empty-state" style="grid-column: 1/-1;">
                        <i class="fas fa-film"></i>
                        <p>Nenhum pedido ainda. Seja o primeiro!</p>
                    </div>
                `;
            } else {
                recentes.forEach(p => {
                    html += `
                        <div class="movie-card">
                            <div class="movie-poster">
                                <img src="${p.poster}" onerror="this.src='https://via.placeholder.com/300x450/1a1a2e/ffffff?text=Sem+Capa'" alt="${p.nome}">
                                <div class="movie-overlay">
                                    <h3>${p.nome}</h3>
                                    ${p.ano ? `<p>${p.ano}</p>` : ''}
                                    ${getBadge(p.status)}
                                </div>
                            </div>
                            <div class="movie-info">
                                <span>${p.genero}</span>
                                <span>${p.data}</span>
                            </div>
                        </div>
                    `;
                });
            }
            
            document.getElementById('lista-recentes').innerHTML = html;
        }

        function renderizarTabela() {
            let tbody = document.getElementById('tabela-pedidos');
            let vazio = document.getElementById('vazio-pedidos');
            
            if (pedidos.length === 0) {
                tbody.innerHTML = '';
                vazio.style.display = 'block';
                return;
            }
            
            vazio.style.display = 'none';
            let html = '';
            
            pedidos.forEach(p => {
                html += `
                    <tr>
                        <td>
                            <img src="${p.poster}" style="width: 50px; height: 75px; object-fit: cover; border-radius: 5px;" 
                                 onerror="this.src='https://via.placeholder.com/50x75/1a1a2e/ffffff?text=?'">
                        </td>
                        <td>
                            <strong>${p.nome}</strong>
                            ${p.ano ? `<br><small style="color: #888;">${p.ano}</small>` : ''}
                        </td>
                        <td style="color: #888;">${p.genero}</td>
                        <td>${getBadge(p.status)}</td>
                        <td style="color: #888; font-size: 0.85rem;">${p.data}</td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }

        function getBadge(status) {
            const badges = {
                pending: '<span class="badge pending"><i class="fas fa-clock"></i> Pendente</span>',
                watching: '<span class="badge watching"><i class="fas fa-play"></i> Em An√°lise</span>',
                completed: '<span class="badge completed"><i class="fas fa-check"></i> Dispon√≠vel</span>',
                rejected: '<span class="badge rejected"><i class="fas fa-times"></i> Indispon√≠vel</span>'
            };
            return badges[status] || status;
        }

        // ============== ADMIN ==============
        function fazerLogin() {
            let senha = document.getElementById('inp-senha').value;
            if (senha === 'admin123') {
                adminLogado = true;
                sessionStorage.setItem('admin_logado', 'sim');
                document.getElementById('login-erro').style.display = 'none';
                mostrarDashboard();
                mostrarToast('‚úÖ Bem-vindo, Administrador!');
            } else {
                document.getElementById('login-erro').style.display = 'block';
            }
        }

        function fazerLogout() {
            adminLogado = false;
            sessionStorage.removeItem('admin_logado');
            mostrarLogin();
        }

        function mostrarLogin() {
            document.getElementById('admin-login').style.display = 'block';
            document.getElementById('admin-dash').style.display = 'none';
        }

        function mostrarDashboard() {
            document.getElementById('admin-login').style.display = 'none';
            document.getElementById('admin-dash').style.display = 'block';
            renderizarAdmin();
        }

        function renderizarAdmin() {
            // Estat√≠sticas
            document.getElementById('adm-total').textContent = pedidos.length;
            document.getElementById('adm-pendentes').textContent = pedidos.filter(p => p.status === 'pending').length;
            document.getElementById('adm-andamento').textContent = pedidos.filter(p => p.status === 'watching').length;
            document.getElementById('adm-prontos').textContent = pedidos.filter(p => p.status === 'completed').length;
            
            // Lista filtrada
            let filtrados = abaAtual === 'all' ? pedidos : pedidos.filter(p => p.status === abaAtual);
            let container = document.getElementById('admin-lista');
            let vazio = document.getElementById('admin-vazio');
            
            if (filtrados.length === 0) {
                container.innerHTML = '';
                vazio.style.display = 'block';
                return;
            }
            
            vazio.style.display = 'none';
            let html = '';
            
            filtrados.forEach(p => {
                html += `
                    <div class="admin-item">
                        <img src="${p.poster}" onerror="this.src='https://via.placeholder.com/100x150/1a1a2e/ffffff?text=Sem+Capa'" alt="${p.nome}">
                        <div class="admin-content">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 10px;">
                                <div>
                                    <h3>${p.nome}</h3>
                                    <p class="admin-meta">${p.ano || 'Sem ano'} ‚Ä¢ ${p.genero} ‚Ä¢ ${p.data} ‚Ä¢ ID: #${p.id.toString().slice(-6)}</p>
                                </div>
                                ${getBadge(p.status)}
                            </div>
                            <div class="admin-actions">
                                <button class="btn-status pending ${p.status === 'pending' ? 'active' : ''}" onclick="alterarStatus(${p.id}, 'pending')">
                                    <i class="fas fa-clock"></i> Pendente
                                </button>
                                <button class="btn-status watching ${p.status === 'watching' ? 'active' : ''}" onclick="alterarStatus(${p.id}, 'watching')">
                                    <i class="fas fa-play"></i> Progresso
                                </button>
                                <button class="btn-status completed ${p.status === 'completed' ? 'active' : ''}" onclick="alterarStatus(${p.id}, 'completed')">
                                    <i class="fas fa-check"></i> Completo
                                </button>
                                <button class="btn-status rejected ${p.status === 'rejected' ? 'active' : ''}" onclick="alterarStatus(${p.id}, 'rejected')">
                                    <i class="fas fa-times"></i> Rejeitado
                                </button>
                                <button class="btn-delete" onclick="excluirPedido(${p.id})">
                                    <i class="fas fa-trash"></i> Excluir
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function mudarAba(aba, botao) {
            abaAtual = aba;
            
            // Atualizar tabs visuais
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            botao.classList.add('active');
            
            renderizarAdmin();
        }

        function alterarStatus(id, novoStatus) {
            let pedido = pedidos.find(p => p.id === id);
            if (pedido) {
                pedido.status = novoStatus;
                salvarDados();
                atualizarTudo();
                renderizarAdmin();
                mostrarToast('‚úÖ Status atualizado!');
            }
        }

        function excluirPedido(id) {
            if (confirm('‚ö†Ô∏è Tem certeza que deseja excluir este pedido permanentemente?')) {
                pedidos = pedidos.filter(p => p.id !== id);
                salvarDados();
                atualizarTudo();
                renderizarAdmin();
                mostrarToast('üóëÔ∏è Pedido exclu√≠do!');
            }
        }

        // ============== UTILIT√ÅRIOS ==============
        function mostrarToast(mensagem) {
            let toast = document.getElementById('toast');
            document.getElementById('toast-text').textContent = mensagem;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Debug
        console.log('üé¨ ARENA PEDIDOS v2.0 - Carregado!');
    </script>
</body>
</html>
        // DADOS
        let pedidos = JSON.parse(localStorage.getItem('arena_v4')) || [
            {id:1,nome:"O Poderoso Chef√£o",ano:"1972",genero:"Drama",status:"completed",poster:"https://m.media-amazon.com/images/M/MV5BM2MyNjYxNmUtYTAwNi00MTYxLWJmNWYtYzZlODY3ZTk3OTFlXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_.jpg",data:"17/02/2024"},
            {id:2,nome:"Interestelar",ano:"2014",genero:"Fic√ß√£o Cient√≠fica",status:"watching",poster:"https://m.media-amazon.com/images/M/MV5BZjdkOTU3MDktN2IxOS00OGEyLWFmMjktY2FiMmZkNWIyODZiXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_.jpg",data:"17/02/2024"},
            {id:3,nome:"Parasita",ano:"2019",genero:"Suspense",status:"pending",poster:"https://m.media-amazon.com/images/M/MV5BYWZjMjk3ZTItODQ2ZC00NTY5LWE0ZDYtZTI3Mjc2N5Q5NjBmXkEyXkFqcGdeQXVyODk4OTc3MTY@._V1_.jpg",data:"16/02/2024"}
        ];
        let logado = false;
        let filtro = 'all';

        // INICIO
        window.onload = function(){
            save();
            updateAll();
        };

        function save(){
            localStorage.setItem('arena_v4',JSON.stringify(pedidos));
        }

        // NAVEGA√á√ÉO
        function show(p){
            document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));
            document.getElementById(p).classList.add('active');
            if(p=='requests') showReq();
            if(p=='admin' && logado) showAdmin();
        }

        // FORMUL√ÅRIO
        function loadImg(i){
            let f=i.files[0];
            if(!f)return;
            if(f.size>5*1024*1024){toast('Arquivo grande! Max 5MB');return;}
            let r=new FileReader();
            r.onload=function(e){
                document.getElementById('f-poster').value=e.target.result;
                document.getElementById('preview-img').src=e.target.result;
                document.getElementById('preview-box').style.display='block';
                document.querySelector('.upload-box').style.display='none';
                toast('Imagem ok!');
            };
            r.readAsDataURL(f);
        }

        document.getElementById('f-url').addEventListener('change',function(){
            let u=this.value.trim();
            if(u&&u.startsWith('http')){
                document.getElementById('f-poster').value=u;
                document.getElementById('preview-img').src=u;
                document.getElementById('preview-box').style.display='block';
                document.querySelector('.upload-box').style.display='none';
            }
        });

        function clearImg(){
            document.getElementById('f-poster').value='';
            document.getElementById('preview-box').style.display='none';
            document.querySelector('.upload-box').style.display='block';
            document.getElementById('f-file').value='';
            document.getElementById('f-url').value='';
        }

        function saveRequest(){
            let p=document.getElementById('f-poster').value;
            if(!p){toast('Adicione capa!');return false;}
            pedidos.unshift({
                id:Date.now(),
                nome:document.getElementById('f-name').value,
                ano:document.getElementById('f-year').value,
                genero:document.getElementById('f-genero').value,
                poster:p,
                status:'pending',
                data:new Date().toLocaleDateString('pt-BR')
            });
            save();
            document.querySelector('form').reset();
            clearImg();
            toast('Pedido enviado!');
            updateAll();
            return false;
        }

        // ATUALIZAR
        function updateAll(){
            document.getElementById('s-total').textContent=pedidos.length;
            document.getElementById('s-done').textContent=pedidos.filter(x=>x.status=='completed').length;
            document.getElementById('s-wait').textContent=pedidos.filter(x=>x.status=='pending').length;
            
            let h='';
            pedidos.slice(0,6).forEach(p=>{
                h+=`<div class="movie-card"><img src="${p.poster}" onerror="this.src='https://via.placeholder.com/300x400/333/fff?text=?'"><div class="movie-info"><strong>${p.nome}</strong><br><span style="color:#888;font-size:12px">${p.genero}</span><br>${badge(p.status)}</div></div>`;
            });
            document.getElementById('recent-list').innerHTML=h||'<p style="color:#666;text-align:center">Nenhum pedido</p>';
        }

        function showReq(){
            let b=document.getElementById('req-list'),e=document.getElementById('req-empty');
            if(!pedidos.length){b.innerHTML='';e.style.display='block';return;}
            e.style.display='none';
            let h='';
            pedidos.forEach(p=>{
                h+=`<tr><td><img src="${p.poster}" style="width:50px;height:75px;object-fit:cover;border-radius:5px" onerror="this.src='https://via.placeholder.com/50x75/333/fff?text=?'"></td><td>${p.nome}${p.ano?'<br><small style="color:#888">'+p.ano+'</small>':''}</td><td style="color:#888">${p.genero}</td><td>${badge(p.status)}</td><td style="color:#888;font-size:12px">${p.data}</td></tr>`;
            });
            b.innerHTML=h;
        }

        function badge(s){
            let b={pending:'<span class="badge pending">‚è≥ Pendente</span>',watching:'<span class="badge watching">‚ñ∂Ô∏è An√°lise</span>',completed:'<span class="badge completed">‚úÖ OK</span>',rejected:'<span class="badge rejected">‚ùå N√£o</span>'};
            return b[s]||s;
        }

        // ADMIN
        function doLogin(){
            if(document.getElementById('adm-pass').value=='admin123'){
                logado=true;
                document.getElementById('adm-login').style.display='none';
                document.getElementById('adm-panel').style.display='block';
                showAdmin();
                toast('Bem-vindo Admin!');
            }else{
                document.getElementById('login-err').style.display='block';
            }
        }

        function showAdmin(){
            document.getElementById('a-total').textContent=pedidos.length;
            document.getElementById('a-pend').textContent=pedidos.filter(x=>x.status=='pending').length;
            document.getElementById('a-prog').textContent=pedidos.filter(x=>x.status=='watching').length;
            document.getElementById('a-done').textContent=pedidos.filter(x=>x.status=='completed').length;
            
            let f=filtro=='all'?pedidos:pedidos.filter(x=>x.status==filtro);
            let h='';
            f.forEach(p=>{
                h+=`<div class="admin-item"><img src="${p.poster}" onerror="this.src='https://via.placeholder.com/80x120/333/fff?text=?'"><div style="flex:1"><strong>${p.nome}</strong><p style="color:#888;font-size:12px">${p.ano||'Sem ano'} ‚Ä¢ ${p.genero} ‚Ä¢ ${p.data}</p>${badge(p.status)}<div class="admin-actions"><button class="status-btn" onclick="setStat(${p.id},'pending')" style="border-color:#f59e0b;color:#f59e0b">Pendente</button><button class="status-btn" onclick="setStat(${p.id},'watching')" style="border-color:#3b82f6;color:#3b82f6">Progresso</button><button class="status-btn" onclick="setStat(${p.id},'completed')" style="border-color:#10b981;color:#10b981">OK</button><button class="status-btn" onclick="setStat(${p.id},'rejected')" style="border-color:#ef4444;color:#ef4444">N√£o</button><button class="status-btn delete" onclick="del(${p.id})">üóëÔ∏è Excluir</button></div></div></div>`;
            });
            document.getElementById('adm-list').innerHTML=h||'<p style="color:#666;text-align:center;padding:40px">Nada aqui</p>';
        }

        function setTab(t,b){
            filtro=t;
            document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
            b.classList.add('active');
            showAdmin();
        }

        function setStat(id,st){
            let p=pedidos.find(x=>x.id==id);
            if(p){p.status=st;save();updateAll();showAdmin();toast('Status ok!');}
        }

        function del(id){
            if(confirm('Excluir?')){
                pedidos=pedidos.filter(x=>x.id!=id);
                save();
                updateAll();
                showAdmin();
                toast('Exclu√≠do!');
            }
        }

        function toast(m){
            let t=document.getElementById('toast');
            t.textContent='‚úÖ '+m;
            t.style.display='block';
            setTimeout(()=>t.style.display='none',3000);
        }
    </script>
</body>
</html>
